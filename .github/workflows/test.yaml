name: Test env var

on:
  push:
    branches:
      - master

permissions:
    id-token: write
    contents: read
    issues: write

jobs:
  revoke-access-dev:
    runs-on: ubuntu-latest
    env:
      the_env: DEV
    steps:
      - uses: actions/checkout@main

      # Log into Azure
      - name: Azure login
        run: |
          env=${the_env,,}
          echo $env
          echo "${{ format('MEGATRON_{0}_SERVICE_PRINCIPAL_PASSWORD', the_env) }}" >> $(pwd)/keypair.pem
          cat $(pwd)/keypair.pem
        shell: bash